{
    "$id": "http://brise.com/experiment_data.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "properties": {
        "hyperparameters":{
            "description": "List of hyperparameters for an experiment.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "oneOf" : [
                    {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "type":{
                                "type": "string",
                                "enum": ["categorical"]
                            },                  
                            "choices": {
                                "type": "array",
                                "minItems": 1
                            },
                            "default": {
                                "type": ["string", "number", "boolean"]
                            }
                        },
                        "required": [
                            "name",
                            "type",
                            "choices",
                            "default"
                        ]
                    },
                    {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "type":{
                                "type": "string",
                                "enum": ["uniform_float", "uniform_int"]
                            },
                            "log":{
                                "type": "boolean"
                            },
                            "lower":{
                                "type": "number"
                            },
                            "upper":{
                                "type": "number"
                            },
                            "default": {
                                "type": ["number"]
                            }
                        },
                        "required": [
                            "name",
                            "type",
                            "log",
                            "lower",
                            "upper",
                            "default"
                        ]
                    },
                    {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "type":{
                                "type": "string",
                                "enum": ["ordinal"]
                            },   
                            "sequence": {
                                "type": "array"
                            },
                            "default": {
                                "type": ["string", "number", "boolean"]
                            }
                        },
                        "required": [
                            "name",
                            "type",
                            "sequence",
                            "default"
                        ]
                    }
                ]
            }
        },
        "conditions":{
            "description": "Conditions between hyperparameters.",
            "type": "array",
            "minItems": 0,
            "uniqueItems": true,
            "items": {
                "type":"object",
                "properties": {
                    "child": {
                        "type":"string"
                    },
                    "parent": {
                        "type":"string"
                    },
                    "type": {
                        "type": "string",
                        "enum": ["EQ"]
                    },
                    "value": {
                        "type": ["string", "number", "boolean"]
                    }
                },
                "required": [
                    "child",
                    "parent",
                    "type",
                    "value"
                ]
            }   
        },
        "forbiddens":{
            "description": "Forbidden combinations of hyperparameters' values.",
            "type": "array",
            "minItems": 0,
            "uniqueItems": true,
            "items":{
                "type":"object",
                "properties": {
                    "name": {
                        "type":"string"
                    },
                    "type": {
                        "type":"string",
                        "enum": ["AND"]
                    },
                    "clauses": {
                        "type":"array",
                        "items": {
                            "type":"object",
                            "properties": {
                                "name":{
                                    "type":"string"
                                },
                                "type":{
                                    "type":"string",
                                    "enum": ["EQUALS", "IN"]
                                },
                                "values":{
                                    "type":"array"
                                },
                                "value":{
                                    "type":["boolean", "number", "string"]
                                }
                            }
                        }
                    }
                },
                "required": [
                    "name",
                    "type",
                    "clauses"
                ]
            }
        }
    },
    "required": [
        "hyperparameters",
        "conditions",
        "forbiddens"
    ]
}
